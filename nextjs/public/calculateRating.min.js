!async function(){let e=["ultima","master","expert"],t=[],n=!1,i=!1,a="https://chuni-log.com";async function o(e,a){let o=e.charAt(0).toUpperCase()+e.slice(1),l=new FormData;return l.append("genre",99),l.append("token",function e(t){let n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let a=n[i];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf("_t="))return a.substring(3,a.length)}return""}("_t")),fetch("https://chunithm-net-eng.com/mobile/record/musicGenre/send"+o,{method:"POST",body:l,credentials:"include"}).then(function(e){return e.text()}).then(function(n){var i=new DOMParser().parseFromString(n,"text/html");let a=$(i).find(".musiclist_box");if(a.length<=0)throw"fail, please login and try again";for(let o=0;o<a.length;o++){let l=a[o].getElementsByClassName("play_musicdata_highscore")[0];if(l){let r=a[o].getElementsByClassName("music_title")[0].innerText,s=$(l).find("span")[0].innerText.split(",").join("");parseInt(s)>=0&&t.push({name:r,difficulty:e,score:parseInt(s)})}}}).catch(e=>{n=!1,i||(i=!0,alert(e))})}async function l(){try{for(let i=0;i<e.length;i++)await o(e[i])}catch(l){n=!1,console.log("calculateRating",l),alw}if(t.length<=0)throw"no songs record, please retry";console.table(t),fetch(a+"/api/record/"+userID,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})}).then(e=>e.text()).then(e=>{window.location=a}).catch(e=>{alert(e)}).finally(()=>{n=!1})}if(userID){let r;n=!0,(r=$(".sleep_penguin img").clone().appendTo("body")).css({position:"absolute",top:"200px","z-index":"200"}),function e(t){t.animate({left:Math.random()*(window.innerWidth-60)+"px",top:Math.random()*(window.innerHeight-88)+"px"},1e3,function(){n?e(t):t.remove()})}(r),await l()}else alert("Invalid!")}();